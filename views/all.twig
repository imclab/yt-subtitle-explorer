<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Translate</title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="css/token-input.css">
  <link rel="stylesheet" href="css/token-input-facebook.css">
  <link rel="stylesheet" href="css/styles.css">

  <script src="js/lib/modernizr.js"></script>

</head>
<body>

	<label>Search</label><input type="text" id="lang-search" name="lang-search" />
  
  <div class="video-list">
		{% for vid in videos %}
		<div class="video">
			<h2><a href="{{vid.url}}">{{vid.title}}</a></h2>
			<img src="{{vid.thumbnail}}" alt="{{vid.title}}" />
			<ul class="languages">
				{% for lang in vid.languages %}
				<li class="lang-{{lang.lang_code}}">
					<span class="lang-trans">{{lang.lang_translated}}</span> - 
					<span class="lang-orig">{{lang.lang_original}}</span>
				</li>
				{% endfor %}
				{% if vid.languages|length == 0 %}
				<li class="lang-none">(none)</li>
				{% endif %}
			</ul>
		</div>
		{% endfor %}
	</div>

  <!-- JavaScript at the bottom for fast page loading: http://developer.yahoo.com/performance/rules.html#js_bottom -->

  <script src="js/lib/jquery.js"></script>
  <script src="js/lib/jquery.tokeninput.js"></script>
  <script>
  	$(function(){

  		$('#lang-search').tokenInput(
  			'{{app.url_generator.generate("langmeta")}}',
  			{
  				theme: "facebook",
  				onAdd: function( item ){
  					console.log( item );
  				},
  				propertyToSearch: 'lang_original',
  				tokenFormatter: function( item ){
  					return '<li>'+item.lang_translated+' - '+item.lang_original+'</li>';
  				},
  				resultsFormatter: function( item ){
  					return '<li>'+item.lang_translated+' - '+item.lang_original+'</li>';
  				}

  			}
  		);

  	});
  </script>
  <!-- scripts concatenated and minified via build script -->
  <!-- end scripts -->

</body>
</html>